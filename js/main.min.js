function scrollbarWidth() {
    var e = $('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');
    $("body").append(e);
    var t = $("div", e).innerWidth();
    e.css("overflow-y", "scroll");
    var n = $("div", e).innerWidth();
    $(e).remove();
    return t - n
}




function introHeight(e) {
    mainPadTop = parseInt($("#main").css("padding-top"));
    introContentHeight = $("#intro .section-inner").height();
    introContentPadBot = parseInt($("#intro .section-inner").css("padding-bottom"));
    if (e - mainPadTop > introContentHeight + introContentPadBot) {
        $("#intro").height(e - mainPadTop);
        $("#supersized").css("height", "");
        var t = (e - mainPadTop - $("#intro .section-inner h1").height() - $("#headline-warpper").height()) / 2;
        $("#headline").css("margin-top", t)
    } else {
        $("#intro").height(introContentHeight + introContentPadBot);
        $("#supersized").height(introContentHeight + introContentPadBot + mainPadTop);
        $("#headline").css("margin-top", "")
    }
}


function supersizedMobile() {
    isMobileTouch && $("#supersized").addClass("disable-fixed")
}

function introAnimation() {
    if (browserWidth >= 1024 && !isMobileTouch) {
        $("#more-links li").transition({
            scale: 3
        }, 0);
        $("#supersized img").load(function() {
            $("#headline").delay(1e3).animate({
                opacity: 1
            }, 1500, "easeOutCubic", function() {
                $("#more-links li").each(function(e) {
                    $(this).delay(e * 300).transition({
                        opacity: 1,
                        scale: 1
                    }, 600, "snap")
                })
            })
        })
    } else browserWidth >= 1024 && isMobileTouch && $("#headline, #more-links li").css("opacity", 1)
}

function skillsChartLegendHeight(e) {
    if (e >= 1024) $("#skills-chart #chart-legend li").height("54px");
    else {
        var t = $("#skills-chart #chart-data").outerHeight();
        $("#skills-chart #chart-legend li").height(t)
    }
}

function skillsChartVBarWidth(e) {
    if (e >= 1024) {
        var t = $("#skills-chart #chart-data li").length,
            n = 100 / t;
        $("#skills-chart #chart-data li").css("width", n + "%")
    } else $("#skills-chart #chart-data li").css("width", "100%")
}

function clearfixChartLegend(e) {
    if (e >= 1024) {
        $("#skills-chart #chart-legend").removeClass("clearfix");
        $("#skills-chart #chart-data").addClass("clearfix")
    } else {
        $("#skills-chart #chart-legend").addClass("clearfix");
        $("#skills-chart #chart-data").removeClass("clearfix")
    }
}

function skillChartAnimationInit() {
    browserWidth >= 1024 && !isMobileTouch && $("#skills-chart .data-bar").each(function(e) {
        skillChartVBarsHeight[e] = $(this).css("height");
        $(this).css("height", 0);
        $(".data-label", this).css("opacity", 0)
    })
}

function skillChartAnimation() {
    if (browserWidth >= 1024 && !isMobileTouch) {
        var e = $(document).scrollTop();
        if (e > browserHeight + 300 && skillChartAnimationCount == 0) {
            skillChartAnimationCount = 1;
            $("#skills-chart .data-bar").each(function(e) {
                $(this).delay(e * 100).animate({
                    height: skillChartVBarsHeight[e]
                }, 800, function() {
                    $(".data-label", this).animate({
                        opacity: 1
                    }, 200)
                })
            })
        }
    }
}

function chartDataAbbreviations() {
    browserWidth < 480 ? $("#chart-data .data-label").each(function() {
        var e = $(this).attr("data-abbr");
        if (e != "") {
            $("span", this).css("display", "none");
            $(this).append('<span class="data-abbr">' + e + "</span>")
        }
    }) : $("#chart-data .data-label").each(function() {
        var e = $(this).attr("data-abbr");
        if (e != "") {
            $(".data-abbr", this).remove();
            $("span", this).css("display", "")
        }
    })
}




$(document).ready(function() {

    browserWidth = $(window).width() + scrollbarWidth();
    browserHeight = $(window).height();
    skillChartAnimationInit();
    var e = 0,
        t = 1,
        n = Math.floor(Math.random() * (t - e + 1)) + e;
   


    $(window).resize(function() {
        browserWidth = $(window).width() + scrollbarWidth();
        browserHeight = $(window).height();
        introHeight(browserHeight);
        skillsChartVBarWidth(browserWidth);
        clearfixChartLegend(browserWidth);
        skillsChartLegendHeight(browserWidth);
        chartDataAbbreviations();



    }).resize();


var waypoint = new Waypoint({
  element: $('#skill-scroll'),
  handler: function(direction) {
   skillChartAnimation()
  }
})


    supersizedMobile()
});

var isMobileTouch = /ipad|iphone|ipod|android|blackberry|webos|windows phone/i.test(navigator.userAgent.toLowerCase()),
    browserWidth, browserHeight, mainMenuShown = !1,
    clickedOnMenu = !1,
    skillChartAnimationCount = 0,
    skillChartVBarsHeight = new Array,
    showTweets = function(e) {
        var t = $("#tweets");
        t.empty();
        var n = e[0].text;
        n = n.replace(/(https?:\/\/[^\s:]+)/gi, '<a href="$1">$1</a>');
        n = n.replace(/(@(\w+))/g, '<a href="http://twitter.com/$2">$1</a>');
        n = n.replace(/(\#(\w+))/g, '<a href="http://search.twitter.com/search?q=%23$2">$1</a>');
        t.append(n)
    };

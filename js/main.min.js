function scrollbarWidth() {
    var e = $('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');
    $("body").append(e);
    var t = $("div", e).innerWidth();
    e.css("overflow-y", "scroll");
    var n = $("div", e).innerWidth();
    $(e).remove();
    return t - n
}

function showMainMenu(e) {
    if (browserWidth >= 1024 && !isMobileTouch) {
        var t = $(document).scrollTop();
        if (t > 300 && !mainMenuShown) {
            mainMenuShown = !0;
            $("#main-menu").animate({
                top: "-20px"
            }, 800, "easeOutElastic")
        }
        if (t < 300 && mainMenuShown) {
            mainMenuShown = !1;
            $("#main-menu").animate({
                top: "-61px"
            }, 500)
        }
    } else $("#main-menu").css("display", "none")
}

function scrollOnClick() {
    $("#main-menu #main-menu-menu a, #more-links ul a").click(function(e) {
        e.preventDefault();
        var t = $(this).attr("href").replace("/#", "");
        $.address.value(t);
        var n = $(this).attr("data-anchor"),
            r = $(n).attr("data-section-title");
        $.address.title(r);
        var i = $(n).offset().top,
            s = $("body").outerHeight();
        s - i < browserHeight && (i = s - browserHeight);
        clickedOnMenu = !0;
        $("html:not(:animated),body:not(:animated)").animate({
            scrollTop: i
        }, 1500, "easeInOutQuint");
        return !1
    })
}

function addressChange() {
    $.address.change(function(e) {
        var t = e.path;
        $("#main-menu #main-menu-menu a").each(function() {
            var e = $(this).attr("href").replace("/#", "");
            if (e == t && !clickedOnMenu) {
                $(this).trigger("click", [!0]);
                clickedOnMenu = !0
            }
        })
    })
}

function addressChangeOnScroll() {}

function introHeight(e) {
    mainPadTop = parseInt($("#main").css("padding-top"));
    introContentHeight = $("#intro .section-inner").height();
    introContentPadBot = parseInt($("#intro .section-inner").css("padding-bottom"));
    if (e - mainPadTop > introContentHeight + introContentPadBot) {
        $("#intro").height(e - mainPadTop);
        $("#supersized").css("height", "");
        var t = (e - mainPadTop - $("#intro .section-inner h1").height() - $("#headline-warpper").height()) / 2;
        $("#headline").css("margin-top", t)
    } else {
        $("#intro").height(introContentHeight + introContentPadBot);
        $("#supersized").height(introContentHeight + introContentPadBot + mainPadTop);
        $("#headline").css("margin-top", "")
    }
}

function clickoOnCircles() {
    isMobileTouch || $("#intro #more-links li a").hover(function() {
        $(this).animate({
            width: "180px",
            height: "180px",
            left: "-13px",
            top: "-13px"
        }, 400, "easeOutElastic");
        $(".arrow", this).delay(200).animate({
            "margin-top": "20px"
        }, 200)
    }, function() {
        $(this).animate({
            width: "153px",
            height: "153px",
            left: 0,
            top: 0
        }, 100, "swing");
        $(".arrow", this).animate({
            "margin-top": "10px"
        }, 100)
    })
}

function supersizedMobile() {
    isMobileTouch && $("#supersized").addClass("disable-fixed")
}

function introAnimation() {
    if (browserWidth >= 1024 && !isMobileTouch) {
        $("#more-links li").transition({
            scale: 3
        }, 0);
        $("#supersized img").load(function() {
            $("#headline").delay(1e3).animate({
                opacity: 1
            }, 1500, "easeOutCubic", function() {
                $("#more-links li").each(function(e) {
                    $(this).delay(e * 300).transition({
                        opacity: 1,
                        scale: 1
                    }, 600, "snap")
                })
            })
        })
    } else browserWidth >= 1024 && isMobileTouch && $("#headline, #more-links li").css("opacity", 1)
}

function skillsChartLegendHeight(e) {
    if (e >= 1024) $("#skills-chart #chart-legend li").height("54px");
    else {
        var t = $("#skills-chart #chart-data").outerHeight();
        $("#skills-chart #chart-legend li").height(t)
    }
}

function skillsChartVBarWidth(e) {
    if (e >= 1024) {
        var t = $("#skills-chart #chart-data li").length,
            n = 100 / t;
        $("#skills-chart #chart-data li").css("width", n + "%")
    } else $("#skills-chart #chart-data li").css("width", "100%")
}

function clearfixChartLegend(e) {
    if (e >= 1024) {
        $("#skills-chart #chart-legend").removeClass("clearfix");
        $("#skills-chart #chart-data").addClass("clearfix")
    } else {
        $("#skills-chart #chart-legend").addClass("clearfix");
        $("#skills-chart #chart-data").removeClass("clearfix")
    }
}

function skillChartAnimationInit() {
    browserWidth >= 1024 && !isMobileTouch && $("#skills-chart .data-bar").each(function(e) {
        skillChartVBarsHeight[e] = $(this).css("height");
        $(this).css("height", 0);
        $(".data-label", this).css("opacity", 0)
    })
}

function skillChartAnimation() {
    if (browserWidth >= 1024 && !isMobileTouch) {
        var e = $(document).scrollTop();
        if (e > browserHeight + 300 && skillChartAnimationCount == 0) {
            skillChartAnimationCount = 1;
            $("#skills-chart .data-bar").each(function(e) {
                $(this).delay(e * 100).animate({
                    height: skillChartVBarsHeight[e]
                }, 800, function() {
                    $(".data-label", this).animate({
                        opacity: 1
                    }, 200)
                })
            })
        }
    }
}

function placeInfoGraphic() {
    wrapperWidth = $("#main .section-inner").width();
    infoGraphicWidth = $("#about-infographic").width();
    if (wrapperWidth < infoGraphicWidth) {
        infoGraphicLeft = (infoGraphicWidth - wrapperWidth) / 2;
        $("#about-infographic").css("left", -infoGraphicLeft)
    } else $("#about-infographic").css("left", "auto")
}

function infoGraphicAnimationInit() {
    if (browserWidth >= 1024 && !isMobileTouch) {
        $("#about-infographic div, #about-infographic div span").css("opacity", 0);
        $("#about-infographic div.circles").css({
            width: 0,
            height: 0
        });
        $("#about-infographic #infographic-circle-green").css({
            "margin-top": "138px",
            "margin-left": "138px"
        });
        $("#about-infographic #infographic-circle-yellow, #about-infographic #infographic-circle-red").css({
            "margin-top": "150px",
            "margin-left": "150px"
        });
        $("#about-infographic #infographic-circle-orange").css({
            "margin-top": "116px",
            "margin-left": "116px"
        })
    }
}

function infoGraphicAnimation() {
    if (browserWidth >= 1024 && !isMobileTouch) {
        var e = $(document).scrollTop();
        if (e > browserHeight / 3 * 2 && infoGraphicAnimationCount == 0) {
            infoGraphicAnimationCount = 1;
            $("#about-infographic #infographic-logo").transition({
                opacity: 1,
                rotate: "360deg"
            }, 1e3, "easeOutQuart", function() {
                $("#about-infographic #infographic-circle-green").animate({
                    opacity: 1,
                    width: "277px",
                    height: "277px",
                    "margin-top": 0,
                    "margin-left": 0
                }, 500, "easeOutCubic");
                $("#about-infographic #infographic-circle-yellow").delay(200).animate({
                    opacity: 1,
                    width: "300px",
                    height: "300px",
                    "margin-top": 0,
                    "margin-left": 0
                }, 500, "easeOutCubic");
                $("#about-infographic #infographic-circle-orange").delay(500).animate({
                    opacity: 1,
                    width: "233px",
                    height: "233px",
                    "margin-top": 0,
                    "margin-left": 0
                }, 500, "easeOutCubic");
                $("#about-infographic #infographic-circle-red").delay(800).animate({
                    opacity: 1,
                    width: "300px",
                    height: "300px",
                    "margin-top": 0,
                    "margin-left": 0
                }, 500, "easeOutCubic", function() {
                    $("#about-infographic .circles span").animate({
                        opacity: 1
                    }, 1e3, "easeOutCubic")
                })
            })
        }
    }
}

function chartDataAbbreviations() {
    browserWidth < 480 ? $("#chart-data .data-label").each(function() {
        var e = $(this).attr("data-abbr");
        if (e != "") {
            $("span", this).css("display", "none");
            $(this).append('<span class="data-abbr">' + e + "</span>")
        }
    }) : $("#chart-data .data-label").each(function() {
        var e = $(this).attr("data-abbr");
        if (e != "") {
            $(".data-abbr", this).remove();
            $("span", this).css("display", "")
        }
    })
}

function readMore() {
    isMobileTouch || $(".work-container .work-info .read-more").hover(function() {
        $("span", this).animate({
            width: "45px"
        }, 500, "easeOutElastic")
    }, function() {
        $("span", this).animate({
            width: 0
        }, 200)
    })
}

function readMoreImage(e) {
    $(".work-container .work-thumbnail a").off("hover");
    if (e >= 1024 && !isMobileTouch) {
        var t = '<div class="hover-div"><div class="icon"><div class="arrow"></div></div></div>';
        $(".work-container .work-thumbnail a").hover(function() {
            $(this).append(t);
            $(".hover-div", this).fadeIn(500);
            $(".icon", this).animate({
                "margin-top": "-25px"
            }, 200, function() {
                $(".arrow", this).show();
                $(".arrow", this).animate({
                    top: "9px",
                    right: "9px",
                    opacity: 1
                }, 200)
            })
        }, function() {
            $(".hover-div", this).fadeOut(100, function() {
                $(this).remove()
            })
        })
    } else $(".work-container .work-thumbnail a").off("hover")
}

function worksOverlayShow() {
    $("#works-list li .work-thumbnail a, #works-list li .read-more, .read-more").click(function() {
        openWorkId = $(this).attr("data-work");
        $("#works-overlay .overlay-header h1").html(worksOverlay[openWorkId].title);
        $("#works-overlay .overlay-header h2").html(worksOverlay[openWorkId].description);
        $("#works-overlay .overlay-footer .visit-website a").html(worksOverlay[openWorkId].linkLabel);
        $("#works-overlay .overlay-footer .visit-website a").attr("href", worksOverlay[openWorkId].link);
        var e = worksOverlay[openWorkId].slides,
            t = worksOverlay[openWorkId].slidesPath,
            n = "";
        for (i = 0; i < e.length; i++) n += '<img class="rsImg" src=' + t + e[i] + ">";
        $("body").addClass("body-lock");
        var r = $(window).height(),
            s = $("#works-overlay");
        s.css({
            bottom: r,
            display: "block",
            opacity: .7
        });
        s.animate({
            bottom: 0,
            opacity: 1
        }, 1e3, "easeOutExpo", function() {
            var e = $(".royalSlider", this).royalSlider({
                arrowsNavAutoHide: !1,
                imageScaleMode: "fit",
                keyboardNavEnabled: !0,
                imageScalePadding: 0,
                video: {
                    autoHideControlNav: !0
                },
                slides: n
            }).resize().data("royalSlider");
            $(".page-count", this).html(e.currSlideId + 1 + " of " + e.numSlides);
            e.ev.on("rsAfterSlideChange", function(t) {
                $("#works-overlay .page-count").html(e.currSlideId + 1 + " of " + e.numSlides)
            });
            $(".container", this).fadeIn(500)
        })
    })
}

function royalSliderHeight() {
    var e = $("#works-overlay .overlay-header").actual("outerHeight", {
            includeMargin: !0
        }),
        t = $("#works-overlay .overlay-footer").actual("outerHeight", {
            includeMargin: !0
        }),
        n = parseFloat($("#works-overlay #slider").css("padding-top")),
        r = parseFloat($("#works-overlay #slider").css("padding-bottom")),
        i = parseFloat($("#works-overlay .container").css("padding-top")),
        s = parseFloat($("#works-overlay .container").css("padding-bottom")),
        o = $("#works-overlay").height() - e - t - i - s - n - r;
    $("#works-overlay #slider").height(o)
}

function worksOverlayHide() {
    $("body").removeClass("body-lock");
    $(".royalSlider").royalSlider("destroy");
    browserWidth >= 1024 ? $("#works-overlay .container").fadeOut(300, function() {
        $("#works-overlay").animate({
            bottom: browserHeight,
            opacity: .7
        }, 500, function() {
            $(this).hide()
        })
    }) : $("#works-overlay .container").fadeOut(300, function() {
        $("#works-overlay").animate({
            opacity: 0
        }, 500, function() {
            $(this).hide()
        })
    })
}

function overlayCloseButton() {
    $(".overlay-close-button").hover(function() {
        $("a", this).animate({
            opacity: .7,
            width: "29px",
            height: "29px",
            "margin-top": "3px",
            "margin-right": "3px"
        }, 200)
    }, function() {
        $("a", this).animate({
            opacity: 1,
            width: "35px",
            height: "35px",
            "margin-top": 0,
            "margin-right": 0
        }, 200)
    });
    $(".overlay-close-button").click(function() {
        worksOverlayHide()
    })
}

function contactsZindex(e) {
    if (!isMobileTouch) {
        var t = $(document).scrollTop();
        t > e ? $("#contacts .container").show() : $("#contacts .container").hide()
    }
}

function contactsMobile() {
    isMobileTouch && $("#contacts").addClass("disable-fixed")
}

function ieOverlayShow() {
    $("#ie-overlay").fadeIn(800)
}

function ieOverlayHide() {
    $("#ie-overlay").fadeOut(300)
}
$(document).ready(function() {
    $.getJSON("../twitter/widgets.php", showTweets);
    browserWidth = $(window).width() + scrollbarWidth();
    browserHeight = $(window).height();
    infoGraphicAnimationInit();
    skillChartAnimationInit();
    var e = 0,
        t = 1,
        n = Math.floor(Math.random() * (t - e + 1)) + e;
    $.supersized({
        slides: [{
            image: "../img/intro-bg" + n + ".jpg",
            title: ""
        }]
    });
    introAnimation();
    $(window).resize(function() {
        browserWidth = $(window).width() + scrollbarWidth();
        browserHeight = $(window).height();
        introHeight(browserHeight);
        skillsChartVBarWidth(browserWidth);
        clearfixChartLegend(browserWidth);
        skillsChartLegendHeight(browserWidth);
        chartDataAbbreviations();
        placeInfoGraphic();
        readMoreImage(browserWidth);
        royalSliderHeight()
    }).resize();
    $(window).scroll(function() {
        browserHeight = $(window).height();
        contactsZindex(browserHeight);
        showMainMenu(browserHeight);
        infoGraphicAnimation();
        skillChartAnimation()
    }).scroll();
    overlayCloseButton(browserWidth);
    clickoOnCircles();
    scrollOnClick();
    addressChange();
    worksOverlayShow();
    readMore();
    contactsMobile();
    supersizedMobile()
});
var isMobileTouch = /ipad|iphone|ipod|android|blackberry|webos|windows phone/i.test(navigator.userAgent.toLowerCase()),
    browserWidth, browserHeight, mainMenuShown = !1,
    clickedOnMenu = !1,
    infoGraphicAnimationCount = 0,
    skillChartAnimationCount = 0,
    skillChartVBarsHeight = new Array,
    showTweets = function(e) {
        var t = $("#tweets");
        t.empty();
        var n = e[0].text;
        n = n.replace(/(https?:\/\/[^\s:]+)/gi, '<a href="$1">$1</a>');
        n = n.replace(/(@(\w+))/g, '<a href="http://twitter.com/$2">$1</a>');
        n = n.replace(/(\#(\w+))/g, '<a href="http://search.twitter.com/search?q=%23$2">$1</a>');
        t.append(n)
    };
